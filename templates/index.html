<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë‹¤í¬ì›¨ë¸Œ ìœ ì¶œ ëª¨ë‹ˆí„°ë¦¬ë‹ ì‹œìŠ¤í…œ</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script>
    const socket = io();
    socket.on("new_data", () => {
      alert("ìƒˆë¡œìš´ ê²Œì‹œê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
      location.reload();
    });
  </script>
</head>
<body class="bg-gray-100">

  <!-- í—¤ë” -->
  <header class="bg-gray-900 text-white p-4 flex items-center">
    <span class="text-2xl mr-2">ğŸ”</span>
    <h1 class="text-2xl font-bold mr-4">BCW</h1>
    <h2 class="text-xl">ë‹¤í¬ì›¨ë¸Œ ìœ ì¶œ ëª¨ë‹ˆí„°ë¦¬ë‹ ì‹œìŠ¤í…œ</h2>
  </header>

  <!-- í‚¤ì›Œë“œ í•„í„° -->
  <div class="p-4 flex flex-wrap gap-2 bg-white shadow items-center text-sm">
    <a href="/" class="bg-gray-200 px-3 py-1 rounded hover:bg-gray-300 font-semibold">
      ì „ì²´ ({{ total_count }})
    </a>
    {% for kw, count in keyword_counts.items() %}
      <a href="/?keyword={{ kw }}" class="bg-gray-200 px-3 py-1 rounded hover:bg-gray-300 {% if selected == kw %}bg-gray-400{% endif %}">
        {{ kw }} ({{ count }})
      </a>
    {% endfor %}
  </div>

  <!-- ê²Œì‹œê¸€ ëª©ë¡ -->
  <div class="p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    {% for post in posts %}
      <div class="bg-white p-4 rounded shadow">
        <h2 class="text-lg font-bold mb-2">ğŸ“Œ ì œëª©: {{ post.title }}</h2>
        <p class="text-sm mb-1">ğŸ‘¤ ì‘ì„±ì: {{ post.author }}</p>
        <p class="text-sm mb-1">ğŸ“… ë‚ ì§œ: {{ post.date }}</p>
        <p class="text-sm mb-1">ğŸ”‘ í‚¤ì›Œë“œ: {{ post.keywords or 'ì—†ìŒ' }}</p>
        <p class="text-sm mt-2">ğŸ“ ìš”ì•½: {{ post.summary[:300] }}</p>
      </div>
    {% else %}
      <p class="col-span-3 text-center text-gray-500">ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endfor %}
  </div>

</body>
</html>